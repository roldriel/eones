<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Advanced Formatting and Serialization in Eones &#8212; Eones 1.4.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <script src="../_static/documentation_options.js?v=350a9c04"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="canonical" href="https://roldriel.github.io/eones/examples/formatting_serialization.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Common Use Cases with Eones" href="use_cases.html" />
    <link rel="prev" title="Error Handling in Eones" href="error_handling.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="advanced-formatting-and-serialization-in-eones">
<h1>Advanced Formatting and Serialization in Eones<a class="headerlink" href="#advanced-formatting-and-serialization-in-eones" title="Link to this heading">¶</a></h1>
<p>Eones includes specialized utilities for formatting and serialization of <code class="docutils literal notranslate"><span class="pre">Date</span></code> and <code class="docutils literal notranslate"><span class="pre">Delta</span></code> objects.</p>
<section id="date-formatting">
<h2>Date Formatting<a class="headerlink" href="#date-formatting" title="Link to this heading">¶</a></h2>
<section id="basic-formatting">
<h3>Basic Formatting<a class="headerlink" href="#basic-formatting" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">eones.formats</span><span class="w"> </span><span class="kn">import</span> <span class="n">format_date</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">eones.date</span><span class="w"> </span><span class="kn">import</span> <span class="n">Date</span>

<span class="c1"># Basic formatting</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">Date</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">format_date</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>  <span class="c1"># &quot;2024-06-15&quot; (default format)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">format_date</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%Y&quot;</span><span class="p">))</span>  <span class="c1"># &quot;15/06/2024&quot;</span>
</pre></div>
</div>
</section>
<section id="formatting-with-timezone">
<h3>Formatting with Timezone<a class="headerlink" href="#formatting-with-timezone" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Formatting with timezone</span>
<span class="n">d_madrid</span> <span class="o">=</span> <span class="n">Date</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s2">&quot;Europe/Madrid&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">format_date</span><span class="p">(</span><span class="n">d_madrid</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M %Z&quot;</span><span class="p">))</span>  <span class="c1"># &quot;2024-06-15 00:00 CEST&quot;</span>

<span class="c1"># Used internally by Date.to_string()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="s2">&quot;%A, %B </span><span class="si">%d</span><span class="s2">, %Y&quot;</span><span class="p">))</span>  <span class="c1"># Uses format_date internally</span>
</pre></div>
</div>
</section>
</section>
<section id="duration-serialization">
<h2>Duration Serialization<a class="headerlink" href="#duration-serialization" title="Link to this heading">¶</a></h2>
<section id="iso-8601-serialization">
<h3>ISO 8601 Serialization<a class="headerlink" href="#iso-8601-serialization" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">eones.formats</span><span class="w"> </span><span class="kn">import</span> <span class="n">format_duration</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">eones.delta</span><span class="w"> </span><span class="kn">import</span> <span class="n">Delta</span>

<span class="c1"># ISO 8601 serialization</span>
<span class="n">delta</span> <span class="o">=</span> <span class="n">Delta</span><span class="p">(</span><span class="n">years</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">months</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">hours</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">format_duration</span><span class="p">(</span><span class="n">delta</span><span class="p">))</span>  <span class="c1"># &quot;P1Y2M3DT4H30M&quot;</span>
</pre></div>
</div>
</section>
<section id="special-duration-cases">
<h3>Special Duration Cases<a class="headerlink" href="#special-duration-cases" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Special cases</span>
<span class="n">delta_time_only</span> <span class="o">=</span> <span class="n">Delta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">format_duration</span><span class="p">(</span><span class="n">delta_time_only</span><span class="p">))</span>  <span class="c1"># &quot;PT2H15M&quot;</span>

<span class="n">delta_date_only</span> <span class="o">=</span> <span class="n">Delta</span><span class="p">(</span><span class="n">years</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">format_duration</span><span class="p">(</span><span class="n">delta_date_only</span><span class="p">))</span>  <span class="c1"># &quot;P1Y10D&quot;</span>

<span class="c1"># Used internally by Delta.to_iso()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">delta</span><span class="o">.</span><span class="n">to_iso</span><span class="p">())</span>  <span class="c1"># Uses format_duration internally</span>
</pre></div>
</div>
</section>
</section>
<section id="common-use-cases">
<h2>Common Use Cases<a class="headerlink" href="#common-use-cases" title="Link to this heading">¶</a></h2>
<section id="serialization-for-rest-apis">
<h3>Serialization for REST APIs<a class="headerlink" href="#serialization-for-rest-apis" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">date_for_api</span><span class="p">(</span><span class="n">date</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Converts a date for use in REST APIs.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="n">format_date</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">),</span>
        <span class="s2">&quot;readable_date&quot;</span><span class="p">:</span> <span class="n">format_date</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="s2">&quot;%B </span><span class="si">%d</span><span class="s2">, %Y&quot;</span><span class="p">),</span>
        <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">date</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span>
    <span class="p">}</span>

<span class="c1"># Usage example</span>
<span class="n">date</span> <span class="o">=</span> <span class="n">Date</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
<span class="n">api_data</span> <span class="o">=</span> <span class="n">date_for_api</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">api_data</span><span class="p">)</span>
<span class="c1"># {</span>
<span class="c1">#     &quot;date&quot;: &quot;2024-12-25&quot;,</span>
<span class="c1">#     &quot;readable_date&quot;: &quot;December 25, 2024&quot;,</span>
<span class="c1">#     &quot;timestamp&quot;: 1735084800.0</span>
<span class="c1"># }</span>
</pre></div>
</div>
</section>
<section id="database-storage">
<h3>Database Storage<a class="headerlink" href="#database-storage" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">save_event</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">duration</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Prepares event data for database storage.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
        <span class="s2">&quot;date_iso&quot;</span><span class="p">:</span> <span class="n">format_date</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%S%z&quot;</span><span class="p">),</span>
        <span class="s2">&quot;duration_iso&quot;</span><span class="p">:</span> <span class="n">format_duration</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
    <span class="p">}</span>

<span class="c1"># Usage example</span>
<span class="n">event_date</span> <span class="o">=</span> <span class="n">Date</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="n">event_duration</span> <span class="o">=</span> <span class="n">Delta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

<span class="n">event_data</span> <span class="o">=</span> <span class="n">save_event</span><span class="p">(</span><span class="s2">&quot;Team meeting&quot;</span><span class="p">,</span> <span class="n">event_date</span><span class="p">,</span> <span class="n">event_duration</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">event_data</span><span class="p">)</span>
<span class="c1"># {</span>
<span class="c1">#     &quot;name&quot;: &quot;Team meeting&quot;,</span>
<span class="c1">#     &quot;date_iso&quot;: &quot;2024-06-15T14:30:00+00:00&quot;,</span>
<span class="c1">#     &quot;duration_iso&quot;: &quot;PT2H30M&quot;</span>
<span class="c1"># }</span>
</pre></div>
</div>
</section>
<section id="structured-logging">
<h3>Structured Logging<a class="headerlink" href="#structured-logging" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>

<span class="k">def</span><span class="w"> </span><span class="nf">log_event</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Logs an event with readable date format.&quot;&quot;&quot;</span>
    <span class="n">formatted_date</span> <span class="o">=</span> <span class="n">format_date</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M&#39;</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Event &#39;</span><span class="si">{</span><span class="n">event</span><span class="si">}</span><span class="s2">&#39; scheduled for </span><span class="si">{</span><span class="n">formatted_date</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Usage example</span>
<span class="n">log_date</span> <span class="o">=</span> <span class="n">Date</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="n">log_event</span><span class="p">(</span><span class="s2">&quot;Automatic backup&quot;</span><span class="p">,</span> <span class="n">log_date</span><span class="p">)</span>
<span class="c1"># INFO:root:Event &#39;Automatic backup&#39; scheduled for 2024-06-15 10:30</span>
</pre></div>
</div>
</section>
<section id="json-export">
<h3>JSON Export<a class="headerlink" href="#json-export" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>

<span class="k">class</span><span class="w"> </span><span class="nc">EonesJSONEncoder</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Custom JSON encoder for Eones objects.&quot;&quot;&quot;</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Date</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Date&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iso&quot;</span><span class="p">:</span> <span class="n">format_date</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%S%z&quot;</span><span class="p">),</span>
                <span class="s2">&quot;readable&quot;</span><span class="p">:</span> <span class="n">format_date</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;%B </span><span class="si">%d</span><span class="s2">, %Y at %H:%M&quot;</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Delta</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Delta&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iso&quot;</span><span class="p">:</span> <span class="n">format_duration</span><span class="p">(</span><span class="n">obj</span><span class="p">),</span>
                <span class="s2">&quot;components&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;years&quot;</span><span class="p">:</span> <span class="n">obj</span><span class="o">.</span><span class="n">years</span><span class="p">,</span>
                    <span class="s2">&quot;months&quot;</span><span class="p">:</span> <span class="n">obj</span><span class="o">.</span><span class="n">months</span><span class="p">,</span>
                    <span class="s2">&quot;days&quot;</span><span class="p">:</span> <span class="n">obj</span><span class="o">.</span><span class="n">days</span><span class="p">,</span>
                    <span class="s2">&quot;hours&quot;</span><span class="p">:</span> <span class="n">obj</span><span class="o">.</span><span class="n">hours</span><span class="p">,</span>
                    <span class="s2">&quot;minutes&quot;</span><span class="p">:</span> <span class="n">obj</span><span class="o">.</span><span class="n">minutes</span><span class="p">,</span>
                    <span class="s2">&quot;seconds&quot;</span><span class="p">:</span> <span class="n">obj</span><span class="o">.</span><span class="n">seconds</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

<span class="c1"># Usage example</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="s2">&quot;Conference&quot;</span><span class="p">,</span>
    <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="n">Date</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="n">Delta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">json_str</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">EonesJSONEncoder</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="json-import">
<h3>JSON Import<a class="headerlink" href="#json-import" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">decode_eones_json</span><span class="p">(</span><span class="n">dct</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decodes Eones objects from JSON.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;_type&quot;</span> <span class="ow">in</span> <span class="n">dct</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">dct</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Date&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Date</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">dct</span><span class="p">[</span><span class="s2">&quot;iso&quot;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">dct</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Delta&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Delta</span><span class="o">.</span><span class="n">from_iso</span><span class="p">(</span><span class="n">dct</span><span class="p">[</span><span class="s2">&quot;iso&quot;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">dct</span>

<span class="c1"># Usage example</span>
<span class="n">json_data</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">{</span>
<span class="s1">  &quot;event&quot;: &quot;Conference&quot;,</span>
<span class="s1">  &quot;date&quot;: {</span>
<span class="s1">    &quot;_type&quot;: &quot;Date&quot;,</span>
<span class="s1">    &quot;iso&quot;: &quot;2024-09-15T09:00:00+00:00&quot;</span>
<span class="s1">  },</span>
<span class="s1">  &quot;duration&quot;: {</span>
<span class="s1">    &quot;_type&quot;: &quot;Delta&quot;,</span>
<span class="s1">    &quot;iso&quot;: &quot;PT8H30M&quot;</span>
<span class="s1">  }</span>
<span class="s1">}</span>
<span class="s1">&#39;&#39;&#39;</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_data</span><span class="p">,</span> <span class="n">object_hook</span><span class="o">=</span><span class="n">decode_eones_json</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Event: </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;event&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Date: </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">/%m/%Y %H:%M&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duration: </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;duration&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">3600</span><span class="si">}</span><span class="s2"> hours&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="locale-specific-formatting">
<h3>Locale-Specific Formatting<a class="headerlink" href="#locale-specific-formatting" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">format_date_locale</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="s2">&quot;en&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Formats date according to specified locale.&quot;&quot;&quot;</span>
    <span class="n">formats</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;es&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> de %B de %Y&quot;</span><span class="p">,</span>
        <span class="s2">&quot;en&quot;</span><span class="p">:</span> <span class="s2">&quot;%B </span><span class="si">%d</span><span class="s2">, %Y&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fr&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> %B %Y&quot;</span><span class="p">,</span>
        <span class="s2">&quot;de&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">. %B %Y&quot;</span>
    <span class="p">}</span>
    
    <span class="n">format_str</span> <span class="o">=</span> <span class="n">formats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span> <span class="n">formats</span><span class="p">[</span><span class="s2">&quot;en&quot;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">format_date</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">format_str</span><span class="p">)</span>

<span class="c1"># Usage example</span>
<span class="n">date</span> <span class="o">=</span> <span class="n">Date</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">format_date_locale</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="s2">&quot;es&quot;</span><span class="p">))</span>  <span class="c1"># &quot;15 de June de 2024&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">format_date_locale</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="s2">&quot;en&quot;</span><span class="p">))</span>  <span class="c1"># &quot;June 15, 2024&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">format_date_locale</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="s2">&quot;fr&quot;</span><span class="p">))</span>  <span class="c1"># &quot;15 June 2024&quot;</span>
</pre></div>
</div>
</section>
<section id="format-validation">
<h3>Format Validation<a class="headerlink" href="#format-validation" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">validate_date_format</span><span class="p">(</span><span class="n">date_str</span><span class="p">,</span> <span class="n">format_str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validates if a date string matches the expected format.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">date</span> <span class="o">=</span> <span class="n">Date</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">date_str</span><span class="p">)</span>
        <span class="n">formatted_date</span> <span class="o">=</span> <span class="n">format_date</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">format_str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">date_str</span> <span class="o">==</span> <span class="n">formatted_date</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

<span class="c1"># Usage example</span>
<span class="nb">print</span><span class="p">(</span><span class="n">validate_date_format</span><span class="p">(</span><span class="s2">&quot;2024-06-15&quot;</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">))</span>  <span class="c1"># True</span>
<span class="nb">print</span><span class="p">(</span><span class="n">validate_date_format</span><span class="p">(</span><span class="s2">&quot;15/06/2024&quot;</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">))</span>  <span class="c1"># False</span>
</pre></div>
</div>
</section>
</section>
<section id="iso-8601-parsing-with-timezone-offsets">
<h2>ISO 8601 Parsing with Timezone Offsets<a class="headerlink" href="#iso-8601-parsing-with-timezone-offsets" title="Link to this heading">¶</a></h2>
<p>Eones provides comprehensive support for parsing ISO 8601 formatted strings with timezone offsets, both through the <code class="docutils literal notranslate"><span class="pre">Date.from_iso()</span></code> method and the <code class="docutils literal notranslate"><span class="pre">Parser</span></code> class.</p>
<section id="using-date-from-iso">
<h3>Using Date.from_iso()<a class="headerlink" href="#using-date-from-iso" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">eones</span><span class="w"> </span><span class="kn">import</span> <span class="n">Date</span>

<span class="c1"># Basic ISO 8601 with UTC</span>
<span class="n">date1</span> <span class="o">=</span> <span class="n">Date</span><span class="o">.</span><span class="n">from_iso</span><span class="p">(</span><span class="s2">&quot;2024-01-15T10:30:00Z&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">date1</span><span class="p">)</span>  <span class="c1"># 2024-01-15T10:30:00+00:00</span>

<span class="c1"># ISO 8601 with positive offset</span>
<span class="n">date2</span> <span class="o">=</span> <span class="n">Date</span><span class="o">.</span><span class="n">from_iso</span><span class="p">(</span><span class="s2">&quot;2024-01-15T10:30:00+03:00&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">date2</span><span class="p">)</span>  <span class="c1"># 2024-01-15T10:30:00+03:00</span>
<span class="nb">print</span><span class="p">(</span><span class="n">date2</span><span class="o">.</span><span class="n">timezone</span><span class="p">)</span>  <span class="c1"># UTC+03:00</span>

<span class="c1"># ISO 8601 with negative offset</span>
<span class="n">date3</span> <span class="o">=</span> <span class="n">Date</span><span class="o">.</span><span class="n">from_iso</span><span class="p">(</span><span class="s2">&quot;2024-01-15T10:30:00-05:00&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">date3</span><span class="p">)</span>  <span class="c1"># 2024-01-15T10:30:00-05:00</span>
<span class="nb">print</span><span class="p">(</span><span class="n">date3</span><span class="o">.</span><span class="n">timezone</span><span class="p">)</span>  <span class="c1"># UTC-05:00</span>

<span class="c1"># ISO 8601 with microseconds and offset</span>
<span class="n">date4</span> <span class="o">=</span> <span class="n">Date</span><span class="o">.</span><span class="n">from_iso</span><span class="p">(</span><span class="s2">&quot;2024-01-15T10:30:00.123456+02:30&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">date4</span><span class="p">)</span>  <span class="c1"># 2024-01-15T10:30:00.123456+02:30</span>
</pre></div>
</div>
</section>
<section id="supported-offset-formats">
<h3>Supported Offset Formats<a class="headerlink" href="#supported-offset-formats" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Various offset formats are supported</span>
<span class="n">formats</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;2024-01-15T10:30:00Z&quot;</span><span class="p">,</span>           <span class="c1"># UTC (Zulu time)</span>
    <span class="s2">&quot;2024-01-15T10:30:00+00:00&quot;</span><span class="p">,</span>      <span class="c1"># UTC with explicit offset</span>
    <span class="s2">&quot;2024-01-15T10:30:00+03:00&quot;</span><span class="p">,</span>      <span class="c1"># Positive offset with colon</span>
    <span class="s2">&quot;2024-01-15T10:30:00-05:00&quot;</span><span class="p">,</span>      <span class="c1"># Negative offset with colon</span>
    <span class="s2">&quot;2024-01-15T10:30:00+0300&quot;</span><span class="p">,</span>       <span class="c1"># Positive offset without colon</span>
    <span class="s2">&quot;2024-01-15T10:30:00-0500&quot;</span><span class="p">,</span>       <span class="c1"># Negative offset without colon</span>
    <span class="s2">&quot;2024-01-15T10:30:00.123+01:00&quot;</span><span class="p">,</span>  <span class="c1"># With milliseconds</span>
    <span class="s2">&quot;2024-01-15T10:30:00.123456-02:00&quot;</span> <span class="c1"># With microseconds</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">fmt</span> <span class="ow">in</span> <span class="n">formats</span><span class="p">:</span>
    <span class="n">date</span> <span class="o">=</span> <span class="n">Date</span><span class="o">.</span><span class="n">from_iso</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">fmt</span><span class="si">:</span><span class="s2">&lt;35</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">date</span><span class="si">}</span><span class="s2"> (TZ: </span><span class="si">{</span><span class="n">date</span><span class="o">.</span><span class="n">timezone</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="using-parser-with-iso-8601-formats">
<h3>Using Parser with ISO 8601 Formats<a class="headerlink" href="#using-parser-with-iso-8601-formats" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">eones</span><span class="w"> </span><span class="kn">import</span> <span class="n">Parser</span>

<span class="c1"># Create a parser (default formats now include ISO 8601 with offsets)</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">Parser</span><span class="p">()</span>

<span class="c1"># Parse various ISO 8601 formats</span>
<span class="n">iso_strings</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;2024-01-15T10:30:00Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;2024-01-15T10:30:00+03:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;2024-01-15T10:30:00.123456-05:00&quot;</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">iso_str</span> <span class="ow">in</span> <span class="n">iso_strings</span><span class="p">:</span>
    <span class="n">date</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">iso_str</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parsed: </span><span class="si">{</span><span class="n">date</span><span class="si">}</span><span class="s2"> (Timezone: </span><span class="si">{</span><span class="n">date</span><span class="o">.</span><span class="n">timezone</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="custom-timezone-for-naive-iso-strings">
<h3>Custom Timezone for Naive ISO Strings<a class="headerlink" href="#custom-timezone-for-naive-iso-strings" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># When parsing naive ISO strings, you can specify a default timezone</span>
<span class="n">naive_iso</span> <span class="o">=</span> <span class="s2">&quot;2024-01-15T10:30:00&quot;</span>

<span class="c1"># Using Date.from_iso() with custom timezone</span>
<span class="n">date_ny</span> <span class="o">=</span> <span class="n">Date</span><span class="o">.</span><span class="n">from_iso</span><span class="p">(</span><span class="n">naive_iso</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s2">&quot;America/New_York&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;New York: </span><span class="si">{</span><span class="n">date_ny</span><span class="si">}</span><span class="s2"> (TZ: </span><span class="si">{</span><span class="n">date_ny</span><span class="o">.</span><span class="n">timezone</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

<span class="c1"># Using Parser with custom default timezone</span>
<span class="n">parser_tokyo</span> <span class="o">=</span> <span class="n">Parser</span><span class="p">(</span><span class="n">tz</span><span class="o">=</span><span class="s2">&quot;Asia/Tokyo&quot;</span><span class="p">)</span>
<span class="n">date_tokyo</span> <span class="o">=</span> <span class="n">parser_tokyo</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">naive_iso</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tokyo: </span><span class="si">{</span><span class="n">date_tokyo</span><span class="si">}</span><span class="s2"> (TZ: </span><span class="si">{</span><span class="n">date_tokyo</span><span class="o">.</span><span class="n">timezone</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="timezone-preservation">
<h3>Timezone Preservation<a class="headerlink" href="#timezone-preservation" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># When an ISO string contains timezone information, it&#39;s preserved</span>
<span class="c1"># even if you specify a different default timezone</span>

<span class="n">iso_with_offset</span> <span class="o">=</span> <span class="s2">&quot;2024-01-15T10:30:00+05:30&quot;</span>

<span class="c1"># The +05:30 offset is preserved, not overridden by America/New_York</span>
<span class="n">date</span> <span class="o">=</span> <span class="n">Date</span><span class="o">.</span><span class="n">from_iso</span><span class="p">(</span><span class="n">iso_with_offset</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s2">&quot;America/New_York&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Original offset preserved: </span><span class="si">{</span><span class="n">date</span><span class="si">}</span><span class="s2"> (TZ: </span><span class="si">{</span><span class="n">date</span><span class="o">.</span><span class="n">timezone</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
<span class="c1"># Output: 2024-01-15T10:30:00+05:30 (TZ: UTC+05:30)</span>
</pre></div>
</div>
</section>
<section id="error-handling-for-invalid-offsets">
<h3>Error Handling for Invalid Offsets<a class="headerlink" href="#error-handling-for-invalid-offsets" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">eones.errors</span><span class="w"> </span><span class="kn">import</span> <span class="n">InvalidFormatError</span>

<span class="c1"># Invalid offset formats will raise InvalidFormatError</span>
<span class="n">invalid_formats</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;2024-01-15T10:30:00+25:00&quot;</span><span class="p">,</span>  <span class="c1"># Invalid hour offset</span>
    <span class="s2">&quot;2024-01-15T10:30:00+03:70&quot;</span><span class="p">,</span>  <span class="c1"># Invalid minute offset</span>
    <span class="s2">&quot;2024-01-15T10:30:00+abc&quot;</span><span class="p">,</span>    <span class="c1"># Non-numeric offset</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">invalid_fmt</span> <span class="ow">in</span> <span class="n">invalid_formats</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">date</span> <span class="o">=</span> <span class="n">Date</span><span class="o">.</span><span class="n">from_iso</span><span class="p">(</span><span class="n">invalid_fmt</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">InvalidFormatError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid format &#39;</span><span class="si">{</span><span class="n">invalid_fmt</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Eones</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../eones.html">eones package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html">Eones</a></li>
<li class="toctree-l1"><a class="reference internal" href="../benchmarks/README.html">Eones Benchmark Suite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LICENSE.html">MIT License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="basic_usage.html">Basic Usage of Eones</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_usage.html">Advanced Usage of Eones</a></li>
<li class="toctree-l1"><a class="reference internal" href="complete_deltas.html">Working with Deltas in Eones</a></li>
<li class="toctree-l1"><a class="reference internal" href="error_handling.html">Error Handling in Eones</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Advanced Formatting and Serialization in Eones</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#date-formatting">Date Formatting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#duration-serialization">Duration Serialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#common-use-cases">Common Use Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="#iso-8601-parsing-with-timezone-offsets">ISO 8601 Parsing with Timezone Offsets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="use_cases.html">Common Use Cases with Eones</a></li>
<li class="toctree-l1"><a class="reference internal" href="week_configuration.html">Configuración del Primer Día de la Semana</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Integrations:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../integrations/fastapi.html">FastAPI &amp; Pydantic Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrations/sqlalchemy.html">SQLAlchemy Integration</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="error_handling.html" title="previous chapter">Error Handling in Eones</a></li>
      <li>Next: <a href="use_cases.html" title="next chapter">Common Use Cases with Eones</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Rodrigo Ezequiel Roldán.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/examples/formatting_serialization.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>