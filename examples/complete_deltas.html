<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Working with Deltas in Eones &#8212; Eones 1.2.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <script src="../_static/documentation_options.js?v=6efca38a"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="canonical" href="https://roldriel.github.io/eones/examples/complete_deltas.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Error Handling in Eones" href="error_handling.html" />
    <link rel="prev" title="Advanced Usage of Eones" href="advanced_usage.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="working-with-deltas-in-eones">
<h1>Working with Deltas in Eones<a class="headerlink" href="#working-with-deltas-in-eones" title="Link to this heading">¶</a></h1>
<p>Eones implements a sophisticated delta system with <strong>dual architecture</strong> that clearly separates time intervals into two categories.</p>
<section id="dual-delta-architecture">
<h2>Dual Delta Architecture<a class="headerlink" href="#dual-delta-architecture" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">DeltaCalendar</span></code></strong>: For calendar-based intervals (years, months, days)</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">DeltaDuration</span></code></strong>: For absolute duration-based intervals (days, hours, minutes, seconds)</p></li>
</ol>
</section>
<section id="main-delta-class">
<h2>Main <code class="docutils literal notranslate"><span class="pre">Delta</span></code> Class<a class="headerlink" href="#main-delta-class" title="Link to this heading">¶</a></h2>
<p>The main <code class="docutils literal notranslate"><span class="pre">Delta</span></code> class acts as a facade that combines both types:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">eones.delta</span><span class="w"> </span><span class="kn">import</span> <span class="n">Delta</span>

<span class="c1"># Deltas are automatically created when calculating differences</span>
<span class="n">date1</span> <span class="o">=</span> <span class="n">Eones</span><span class="p">(</span><span class="s2">&quot;2024-01-01&quot;</span><span class="p">)</span>
<span class="n">date2</span> <span class="o">=</span> <span class="n">Eones</span><span class="p">(</span><span class="s2">&quot;2024-03-15&quot;</span><span class="p">)</span>

<span class="n">delta</span> <span class="o">=</span> <span class="n">date2</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">date1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span>  <span class="c1"># Shows the difference in readable format</span>

<span class="c1"># Deltas can be applied to dates</span>
<span class="n">new_date</span> <span class="o">=</span> <span class="n">date1</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>  <span class="c1"># Equivalent to the previous delta</span>
</pre></div>
</div>
<section id="main-methods-of-delta">
<h3>Main Methods of <code class="docutils literal notranslate"><span class="pre">Delta</span></code><a class="headerlink" href="#main-methods-of-delta" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create deltas</span>
<span class="n">delta</span> <span class="o">=</span> <span class="n">Delta</span><span class="p">(</span><span class="n">years</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">months</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">hours</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

<span class="c1"># From standard timedelta</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">timedelta</span>
<span class="n">td</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">3600</span><span class="p">)</span>
<span class="n">delta</span> <span class="o">=</span> <span class="n">Delta</span><span class="o">.</span><span class="n">from_timedelta</span><span class="p">(</span><span class="n">td</span><span class="p">)</span>

<span class="c1"># From ISO 8601 format</span>
<span class="n">delta</span> <span class="o">=</span> <span class="n">Delta</span><span class="o">.</span><span class="n">from_iso</span><span class="p">(</span><span class="s2">&quot;P1Y2M10DT3H30M&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">delta</span><span class="o">.</span><span class="n">to_iso</span><span class="p">())</span>  <span class="c1"># &quot;P1Y2M10DT3H30M&quot;</span>

<span class="c1"># Conversions</span>
<span class="nb">print</span><span class="p">(</span><span class="n">delta</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">())</span>  <span class="c1"># Duration components only</span>
<span class="nb">print</span><span class="p">(</span><span class="n">delta</span><span class="o">.</span><span class="n">total_months</span><span class="p">())</span>   <span class="c1"># 12 * years + months</span>

<span class="c1"># Operations</span>
<span class="n">delta1</span> <span class="o">=</span> <span class="n">Delta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">delta2</span> <span class="o">=</span> <span class="n">Delta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">delta1</span> <span class="o">-</span> <span class="n">delta2</span>  <span class="c1"># Delta(days=3)</span>
</pre></div>
</div>
</section>
</section>
<section id="deltacalendar-calendar-intervals">
<h2><code class="docutils literal notranslate"><span class="pre">DeltaCalendar</span></code> - Calendar Intervals<a class="headerlink" href="#deltacalendar-calendar-intervals" title="Link to this heading">¶</a></h2>
<p>Handles intervals that depend on calendar structure (years, months, days):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">eones.core.delta_calendar</span><span class="w"> </span><span class="kn">import</span> <span class="n">DeltaCalendar</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">eones.date</span><span class="w"> </span><span class="kn">import</span> <span class="n">Date</span>

<span class="c1"># Create calendar delta</span>
<span class="n">dc</span> <span class="o">=</span> <span class="n">DeltaCalendar</span><span class="p">(</span><span class="n">years</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">months</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># Apply to a date (automatically handles month boundaries)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">Date</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>  <span class="c1"># January 31st</span>
<span class="n">new_date</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>  <span class="c1"># Add 1 month</span>
<span class="nb">print</span><span class="p">(</span><span class="n">new_date</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>  <span class="c1"># &quot;2024-02-29&quot; (handles leap year)</span>

<span class="c1"># Special end-of-month cases</span>
<span class="n">end_of_month</span> <span class="o">=</span> <span class="n">Date</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
<span class="n">one_month</span> <span class="o">=</span> <span class="n">DeltaCalendar</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">one_month</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">end_of_month</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>  <span class="c1"># &quot;2024-02-29&quot; (not &quot;2024-02-31&quot;)</span>

<span class="c1"># Invert delta</span>
<span class="n">negative_dc</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">invert</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">negative_dc</span><span class="o">.</span><span class="n">years</span><span class="p">,</span> <span class="n">negative_dc</span><span class="o">.</span><span class="n">months</span><span class="p">)</span>  <span class="c1"># -1, -2</span>

<span class="c1"># Operations</span>
<span class="n">dc1</span> <span class="o">=</span> <span class="n">DeltaCalendar</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">dc2</span> <span class="o">=</span> <span class="n">DeltaCalendar</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">dc1</span> <span class="o">-</span> <span class="n">dc2</span>  <span class="c1"># DeltaCalendar(months=2)</span>
</pre></div>
</div>
</section>
<section id="deltaduration-duration-intervals">
<h2><code class="docutils literal notranslate"><span class="pre">DeltaDuration</span></code> - Duration Intervals<a class="headerlink" href="#deltaduration-duration-intervals" title="Link to this heading">¶</a></h2>
<p>Handles absolute time intervals that don’t depend on the calendar:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">eones.core.delta_duration</span><span class="w"> </span><span class="kn">import</span> <span class="n">DeltaDuration</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">eones.date</span><span class="w"> </span><span class="kn">import</span> <span class="n">Date</span>

<span class="c1"># Create duration delta</span>
<span class="n">dd</span> <span class="o">=</span> <span class="n">DeltaDuration</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">hours</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>

<span class="c1"># Apply to a date</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">Date</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="s2">&quot;2024-06-15T10:00:00&quot;</span><span class="p">)</span>
<span class="n">new_date</span> <span class="o">=</span> <span class="n">dd</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">new_date</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">))</span>  <span class="c1"># &quot;2024-06-17 13:30:45&quot;</span>

<span class="c1"># Convert to standard timedelta</span>
<span class="n">td</span> <span class="o">=</span> <span class="n">dd</span><span class="o">.</span><span class="n">to_timedelta</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">td</span><span class="p">)</span>  <span class="c1"># &quot;2 days, 3:30:45&quot;</span>

<span class="c1"># Invert delta</span>
<span class="n">negative_dd</span> <span class="o">=</span> <span class="n">dd</span><span class="o">.</span><span class="n">invert</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">negative_dd</span><span class="o">.</span><span class="n">hours</span><span class="p">)</span>  <span class="c1"># -3</span>

<span class="c1"># Operations</span>
<span class="n">dd1</span> <span class="o">=</span> <span class="n">DeltaDuration</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">dd2</span> <span class="o">=</span> <span class="n">DeltaDuration</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">dd1</span> <span class="o">-</span> <span class="n">dd2</span>  <span class="c1"># DeltaDuration(hours=3)</span>
</pre></div>
</div>
</section>
<section id="when-to-use-each-type">
<h2>When to Use Each Type<a class="headerlink" href="#when-to-use-each-type" title="Link to this heading">¶</a></h2>
<p><strong>Use <code class="docutils literal notranslate"><span class="pre">DeltaCalendar</span></code> when:</strong></p>
<ul class="simple">
<li><p>Working with months and years (“next month”, “in 2 years”)</p></li>
<li><p>Need to respect calendar boundaries (end of month, leap years)</p></li>
<li><p>Performing due date or anniversary calculations</p></li>
</ul>
<p><strong>Use <code class="docutils literal notranslate"><span class="pre">DeltaDuration</span></code> when:</strong></p>
<ul class="simple">
<li><p>Working with precise time intervals (“in 2 hours and 30 minutes”)</p></li>
<li><p>Need absolute duration independent of calendar</p></li>
<li><p>Performing elapsed time or timeout calculations</p></li>
</ul>
<p><strong>Use main <code class="docutils literal notranslate"><span class="pre">Delta</span></code> when:</strong></p>
<ul class="simple">
<li><p>Need to combine both types of intervals</p></li>
<li><p>Want the simplest and most complete interface</p></li>
<li><p>Working with automatically calculated differences</p></li>
</ul>
</section>
<section id="practical-examples">
<h2>Practical Examples<a class="headerlink" href="#practical-examples" title="Link to this heading">¶</a></h2>
<section id="monthly-due-date">
<h3>Monthly Due Date<a class="headerlink" href="#monthly-due-date" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Monthly due date (uses DeltaCalendar)</span>
<span class="n">due_date</span> <span class="o">=</span> <span class="n">Date</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
<span class="n">next_due</span> <span class="o">=</span> <span class="n">DeltaCalendar</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">due_date</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">next_due</span><span class="p">)</span>  <span class="c1"># 2024-02-29 (not 2024-02-31)</span>
</pre></div>
</div>
</section>
<section id="session-timeout">
<h3>Session Timeout<a class="headerlink" href="#session-timeout" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Session timeout (uses DeltaDuration)</span>
<span class="n">session_start</span> <span class="o">=</span> <span class="n">Date</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">timeout</span> <span class="o">=</span> <span class="n">DeltaDuration</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">session_expires</span> <span class="o">=</span> <span class="n">timeout</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">session_start</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Session expires: </span><span class="si">{</span><span class="n">session_expires</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;%H:%M&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="complex-reminder">
<h3>Complex Reminder<a class="headerlink" href="#complex-reminder" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Complex reminder (uses combined Delta)</span>
<span class="n">reminder</span> <span class="o">=</span> <span class="n">Delta</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">hours</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># One month and 2 hours later</span>
<span class="n">reminder_date</span> <span class="o">=</span> <span class="n">reminder</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>
</pre></div>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Eones</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../eones.html">eones package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html">Eones</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">MIT License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">📦 CHANGELOG</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="basic_usage.html">Basic Usage of Eones</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_usage.html">Advanced Usage of Eones</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Working with Deltas in Eones</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dual-delta-architecture">Dual Delta Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="#main-delta-class">Main <code class="docutils literal notranslate"><span class="pre">Delta</span></code> Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deltacalendar-calendar-intervals"><code class="docutils literal notranslate"><span class="pre">DeltaCalendar</span></code> - Calendar Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deltaduration-duration-intervals"><code class="docutils literal notranslate"><span class="pre">DeltaDuration</span></code> - Duration Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="#when-to-use-each-type">When to Use Each Type</a></li>
<li class="toctree-l2"><a class="reference internal" href="#practical-examples">Practical Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="error_handling.html">Error Handling in Eones</a></li>
<li class="toctree-l1"><a class="reference internal" href="formatting_serialization.html">Advanced Formatting and Serialization in Eones</a></li>
<li class="toctree-l1"><a class="reference internal" href="use_cases.html">Common Use Cases with Eones</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="advanced_usage.html" title="previous chapter">Advanced Usage of Eones</a></li>
      <li>Next: <a href="error_handling.html" title="next chapter">Error Handling in Eones</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Rodrigo Ezequiel Roldán.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/examples/complete_deltas.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>